

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Détection automatique des erreurs flake8 avec Git &mdash; Zeste de Savoir 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Zeste de Savoir 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Makefile et autres outils" href="../utils.html"/>
        <link rel="next" title="Installer un plugin de recherche à votre navigateur" href="opensearch.html"/>
        <link rel="prev" title="Générer les PDFs des différents contenus" href="generate_pdf.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Zeste de Savoir
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html"><em>Workflow</em> et détails pratiques</a></li>
<li class="toctree-l1"><a class="reference internal" href="../back-end.html">Le <em>back-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../back-end-code.html">Documentation technique du <em>back-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../front-end.html">Le <em>front-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../utils.html">Makefile et autres outils</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="0-makefile.html">Makefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="anonym_dislikes.html">Anonymisation des +/-1</a></li>
<li class="toctree-l2"><a class="reference internal" href="captcha.html">Paramètrer le moteur de Captcha</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixture_loaders.html">Le chargement de jeux de données (fixtures)</a></li>
<li class="toctree-l2"><a class="reference internal" href="generate_pdf.html">Générer les PDFs des différents contenus</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Détection automatique des erreurs <em>flake8</em> avec Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="opensearch.html">Installer un plugin de recherche à votre navigateur</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_generator.html">Générer les rapports de release</a></li>
<li class="toctree-l2"><a class="reference internal" href="selenium.html">Selenium</a></li>
<li class="toctree-l2"><a class="reference internal" href="tox.html">Tox</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Zeste de Savoir</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../utils.html">Makefile et autres outils</a> &raquo;</li>
        
      <li>Détection automatique des erreurs <em>flake8</em> avec Git</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/utils/git-pre-hook.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="detection-automatique-des-erreurs-flake8-avec-git">
<h1>Détection automatique des erreurs <em>flake8</em> avec Git<a class="headerlink" href="#detection-automatique-des-erreurs-flake8-avec-git" title="Permalink to this headline">¶</a></h1>
<p>Afin de s’assurer qu’aucune erreur de mise en forme ne passe les commits,
il peut être utile de rajouter un hook de pre-commit à git. Un hook est un petit
programme qui sera exécuté avant une action particulière de git. En l’occurence nous
allons rajouter un hook qui s’executera juste avant la validation d’un commit.</p>
<p>Pour cela, commencer par créer et éditer le fichier <cite>.git/hooks/pre-commit</cite></p>
<p>Ensuite, il ne reste plus qu’à rajouter le contenu suivant dans ce fichier et dorénavant
le controle flake (pour le respect PEP) sera exécuté avant la validation du message de commit.
Ainsi, plus aucune erreur flake ne viendra vous embêter à posteriori et la base de code
restera propre et lisible au cours du temps !</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

flake8 zds

<span class="c1"># Store tests result</span>
<span class="nv">RESULT</span><span class="o">=</span><span class="nv">$?</span>

<span class="o">[</span> <span class="nv">$RESULT</span> -ne <span class="m">0</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="nb">exit</span> <span class="m">0</span>
</pre></div>
</div>
<p>Enfin n’oubliez pas de le rendre executable via chmod</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>chmod +x .git/hooks/pre-commit
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="opensearch.html" class="btn btn-neutral float-right" title="Installer un plugin de recherche à votre navigateur" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="generate_pdf.html" class="btn btn-neutral" title="Générer les PDFs des différents contenus" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, zestedesavoir.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>